(()=>{"use strict";const e=e=>{const t="a"==e.tagName.toLowerCase()?e.getAttribute("href").substr(1):e.closest("a").getAttribute("href").substr(1);document.getElementById(t).scrollIntoView({behavior:"smooth",block:"start"})},t=e=>function(t){return t<.5?e(2*t)/2:(2-e(2*(1-t)))/2},a=(t((e=>Math.pow(e,2))),t((e=>1-Math.sin(Math.acos(e))))),s=({timing:e,draw:t,duration:a})=>{let s=performance.now();requestAnimationFrame((function o(r){let l=(r-s)/a;l>1&&(l=1);let n=e(l);t(n),l<1&&requestAnimationFrame(o)}))};((e,t=!1)=>{const a=document.getElementById("timer-hours"),s=document.getElementById("timer-minutes"),o=document.getElementById("timer-seconds"),r=new Date(e).getTime();let l;const n=e=>e<10?"0"+e:""+e;l=setInterval((()=>{const e=(()=>{const e=(new Date).getTime(),a=(r-e)/1e3,s=Math.floor(a/3600/24);let o=Math.floor(a/3600);o=t?o%24:o;const l=Math.floor(a/60)%60,i=Math.floor(a)%60;return{timeRemaining:a,days:n(s),hours:n(o),minutes:n(l),seconds:n(i)}})();e.timeRemaining<=0?clearInterval(l):(a.textContent=e.hours,s.textContent=e.minutes,o.textContent=e.seconds)}),1e3)})("08 march 2022"),(()=>{const t=document.querySelector("menu");document.addEventListener("click",(a=>(a=>{if(a.target.closest(".menu")||a.target.closest("menu")){if(a.preventDefault(),a.target.matches("ul>li>a"))e(a.target);else if(!a.target.classList.contains("close-btn")&&a.target.closest("menu"))return}else if(!t.classList.contains("active-menu"))return;t.classList.toggle("active-menu")})(a)))})(),(()=>{const e=document.querySelector(".popup"),t=e.querySelector(".popup-content");document.querySelectorAll(".popup-btn").forEach((o=>o.addEventListener("click",(()=>{e.style.display="block",window.outerWidth>768&&s({duration:400,timing:a,draw(e){t.style.top=`${-50+Math.round(60*e)}%`}})})))),e.addEventListener("click",(t=>{t.target.closest(".popup-content")&&!t.target.classList.contains("popup-close")||(e.style.display="")}))})(),document.querySelector('a[href="#service-block"]').addEventListener("click",(t=>{t.preventDefault(),e(t.target)})),((e=100)=>{const t=document.querySelector(".calc-block"),a=document.querySelector(".calc-type"),o=document.querySelector(".calc-square"),r=document.querySelector(".calc-count"),l=document.querySelector(".calc-day"),n=document.getElementById("total");t.addEventListener("input",(t=>{t.target!==a&&t.target!==o&&t.target!==r&&t.target!==l||(t.target!==a&&(t.target.value=t.target.value.replace(/\D+/gi,"")),(()=>{const t=+a.options[a.selectedIndex].value,i=+o.value;let c,d,m=0,u=1,f=1;l.value&&+l.value<5?f=2:l.value&&l.value<10&&(f=1.5),+r.value>1&&(u+=+r.value/10),m=a.value&&o.value?e*t*i*u*f:0,c=+n.textContent,d=m,s({duration:400,timing:e=>e,draw(e){n.textContent=c+Math.round((d-c)*e)}})})())}))})(100),(e=>{try{e.formList.forEach((t=>{if(t.form=document.getElementById(t.formId),!t.form)throw new Error(`Отсутствует элемент с id="${t.formId}"`);t.formFields.forEach((a=>{if(a.field=t.form.querySelector(a.fieldSelector),!a.field)throw new Error(`Отсутствует элемент с селектором="${t.formId}"`);a.field.classList.add("form-control"),a.field.addEventListener("input",(t=>{t.target.value=t.target.value.replace(e.constransTemplates[a.fieldConstrians[0]],""),t.target.classList.remove("is-valid"),t.target.classList.remove("is-invalid")})),a.field.addEventListener("blur",(t=>{var s;t.target.value=(s=e.constransTemplates[a.fieldConstrians[0]],t.target.value.replace(s,"").replace(/( ){2,}/gi,((e,t)=>t)).replace(/(\-){2,}/gi,((e,t)=>t)).replace(/(^[ \-]+|[ \-]+$)/gi,"")),/user_name/gi.test(a.fieldSelector)&&(t.target.value=t.target.value.toLowerCase().replace(/((^[а-яё])|((?<=[^а-яё])[а-яё]))/gi,((e,t)=>(t+"").toUpperCase())))}))})),t.form.addEventListener("submit",(a=>{a.preventDefault(),(t=>{var a;t.formData=new FormData(t.form),t.formBody={},t.statusBlock=document.createElement("div"),t.statusBlock.style.color="white",t.statusBlock.textContent="Загрузка...",t.form.append(t.statusBlock),t.formData.forEach(((e,a)=>{t.formBody[a]=e})),t.someElement&&t.someElement.forEach((e=>{const a=document.getElementById(e.id);if(!a)throw new Error(`Отсутствует элемент с с id="${e.id}"`);"block"===e.type?t.formBody[e.id]=a.textContent:"input"===e.type&&(t.formBody[e.id]=a.value)})),(t=>{let a=!0;return t.forEach((t=>{e.constransTemplates[t.fieldConstrians[0]].test(t.field.value)||""===t.field.value?(t.field.classList.remove("is-valid"),t.field.classList.add("is-invalid"),a=!1):(t.field.classList.remove("is-invalid"),t.field.classList.add("is-valid"))})),a})(t.formFields)?(a=t.formBody,fetch("https://jsonplaceholder.typicode.com/posts",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json; charset=utf-8"}}).then((e=>e.json()))).then((e=>{t.statusBlock.textContent="Спасибо! Наш менеджер с вами свяжется.",t.formFields.forEach((e=>{e.value=""}))})).catch((e=>{t.statusBlock.textContent="Ошибка.."})):alert("Данные не валидны!!!")})(t)}))}))}catch(e){console.log(e.message)}})({constransTemplates:{hasNotName:/[^а-яёА-ЯЁ \-]/gi,hasNotMessage:/[^а-яёА-ЯЁ \-\.\!\?\:\;\(\)0-9]/gi,hasNotEmail:/[^\w\-\@\.\!\~\*\']/gi,hasNotTelephone:/[^\d\(\)\-\+]/gi},formList:[{formId:"form1",formFields:[{fieldSelector:"input[name=user_name]",fieldConstrians:["hasNotName"]},{fieldSelector:"input[name=user_email]",fieldConstrians:["hasNotEmail"]},{fieldSelector:"input[name=user_phone]",fieldConstrians:["hasNotTelephone"]}],someElement:[{type:"block",id:"total"}]},{formId:"form2",formFields:[{fieldSelector:"input[name=user_name]",fieldConstrians:["hasNotName"]},{fieldSelector:"input[name=user_message]",fieldConstrians:["hasNotMessage"]},{fieldSelector:"input[name=user_email]",fieldConstrians:["hasNotEmail"]},{fieldSelector:"input[name=user_phone]",fieldConstrians:["hasNotTelephone"]}]},{formId:"form3",formFields:[{fieldSelector:"input[name=user_name]",fieldConstrians:["hasNotName"]},{fieldSelector:"input[name=user_email]",fieldConstrians:["hasNotEmail"]},{fieldSelector:"input[name=user_phone]",fieldConstrians:["hasNotTelephone"]}]}]}),(()=>{const e=document.querySelector(".service-header"),t=document.querySelectorAll(".service-header-tab"),a=document.querySelectorAll(".service-tab");e.addEventListener("click",(e=>{const s=e.target.closest(".service-header-tab");s&&t.forEach(((e,t)=>{e===s?(e.classList.add("active"),a[t].classList.remove("d-none")):(e.classList.remove("active"),a[t].classList.add("d-none"))}))}))})(),(e=>{const t={autoInterval:2e3,sliderClass:"portfolio-content",itemSlideClass:"portfolio-item",activeSlideClass:"slide-active",dotsBlock:"portfolio-dots",itemDotClass:"dot",activeDotClass:"dot-active",arrowClass:"portfolio-btn",prevArrowClass:"prev",nextArrowClass:"next",...e},a=document.querySelector(`.${t.sliderClass}`),s=document.querySelectorAll(`.${t.itemSlideClass}`),o=document.querySelector(`.${t.dotsBlock}`),r=t.autoInterval;let l,n,i=0;const c=(e,t,a)=>{e[t].classList.remove(a)},d=(e,t,a)=>{e[t].classList.add(a)},m=e=>{c(s,i,t.activeSlideClass),c(n,i,t.activeDotClass),e(),d(s,i,t.activeSlideClass),d(n,i,t.activeDotClass)},u=()=>{m((()=>{i=i<s.length-1?i+1:0}))},f=(e=1500)=>{l=setInterval(u,e)};var v,p;a&&s.length>0&&(v=t.activeSlideClass,p=t.activeDotClass,o.innerHTML="",s.forEach(((e,a)=>{const s=document.createElement("li");s.classList.add(t.itemDotClass),e.classList.contains(v)&&(s.classList.add(p),i=a),o.append(s)})),n=document.querySelectorAll(`.${t.itemDotClass}`),a.addEventListener("click",(e=>{e.preventDefault(),e.target.matches(`.${t.arrowClass}, .${t.itemDotClass}`)&&m((()=>{e.target.matches(`.${t.arrowClass}.${t.prevArrowClass}`)?i=i>0?i-1:s.length-1:e.target.matches(`.${t.arrowClass}.${t.nextArrowClass}`)?i=i<s.length-1?i+1:0:e.target.classList.contains(t.itemDotClass)&&n.forEach(((t,a)=>{e.target===t&&(i=a)}))}))})),a.addEventListener("mouseenter",(e=>{e.target.matches(`.${t.arrowClass}, .${t.itemDotClass}`)&&clearInterval(l)}),!0),a.addEventListener("mouseleave",(e=>{e.target.matches(`.${t.arrowClass}, .${t.itemDotClass}`)&&f(r)}),!0),f(r))})({autoInterval:2e3,activeDotClass:"dot-active",activeSlideClass:"portfolio-item-active"})})();